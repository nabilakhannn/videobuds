{% extends "base.html" %}
{% block title %}Pricing{% endblock %}

{% block content %}
<div class="max-w-5xl mx-auto">
    <!-- Header -->
    <div class="mb-8">
        <h1 class="text-2xl font-bold text-gray-900 dark:text-white">Model Pricing</h1>
        <p class="mt-1 text-sm text-gray-500 dark:text-gray-400">All available AI models with per-generation pricing. Models with a free tier are highlighted.</p>
    </div>

    <!-- Image Models -->
    <div class="mb-10">
        <div class="flex items-center gap-2 mb-4">
            <span class="inline-flex items-center px-2.5 py-1 rounded-full text-xs font-bold uppercase tracking-wider bg-blue-50 dark:bg-blue-900/20 text-blue-600 dark:text-blue-400 border border-blue-200 dark:border-blue-700/50">
                Image
            </span>
            <h2 class="text-lg font-semibold text-gray-800 dark:text-gray-100">Image Generation Models</h2>
            <span class="text-xs text-gray-400 dark:text-gray-500">({{ image_models | length }} models)</span>
        </div>

        <div class="bg-white dark:bg-[#1A1A1A] rounded-xl border border-[#26A0D8]/20 dark:border-[#26A0D8]/40 overflow-hidden">
            <table class="w-full">
                <thead>
                    <tr class="border-b border-[#26A0D8]/10 dark:border-[#26A0D8]/20">
                        <th class="text-left px-5 py-3 text-[11px] font-bold uppercase tracking-wider text-gray-400 dark:text-gray-500">Model</th>
                        <th class="text-left px-5 py-3 text-[11px] font-bold uppercase tracking-wider text-gray-400 dark:text-gray-500">Provider</th>
                        <th class="text-center px-5 py-3 text-[11px] font-bold uppercase tracking-wider text-gray-400 dark:text-gray-500">Type</th>
                        <th class="text-right px-5 py-3 text-[11px] font-bold uppercase tracking-wider text-gray-400 dark:text-gray-500">Per Generation</th>
                        <th class="text-center px-5 py-3 text-[11px] font-bold uppercase tracking-wider text-gray-400 dark:text-gray-500">Free Tier</th>
                    </tr>
                </thead>
                <tbody class="divide-y divide-gray-100 dark:divide-gray-800">
                    {% for m in image_models %}
                    {% for p in m.providers %}
                    <tr class="hover:bg-gray-50 dark:hover:bg-[#222] transition-colors {{ 'bg-green-50/50 dark:bg-green-900/10' if p.free_tier else '' }}">
                        <td class="px-5 py-3">
                            {% if loop.first %}
                            <div class="flex items-center gap-2">
                                <span class="text-lg">{{ m.icon }}</span>
                                <div>
                                    <p class="text-sm font-semibold text-gray-800 dark:text-gray-100">{{ m.display_name }}</p>
                                    <p class="text-[10px] text-gray-400 dark:text-gray-500 max-w-xs truncate">{{ m.description }}</p>
                                </div>
                            </div>
                            {% endif %}
                        </td>
                        <td class="px-5 py-3">
                            <div class="flex items-center gap-1.5">
                                <span class="text-sm text-gray-700 dark:text-gray-300">{{ p.label }}</span>
                                {% if p.sync %}
                                <span class="px-1.5 py-0.5 text-[9px] font-medium bg-gray-100 dark:bg-gray-700 text-gray-500 dark:text-gray-400 rounded">Instant</span>
                                {% endif %}
                            </div>
                        </td>
                        <td class="px-5 py-3 text-center">
                            <span class="inline-flex items-center px-1.5 py-0.5 rounded text-[9px] font-medium uppercase tracking-wider bg-blue-50 dark:bg-blue-900/20 text-blue-600 dark:text-blue-400">Image</span>
                        </td>
                        <td class="px-5 py-3 text-right">
                            {% if p.free_tier %}
                            <span class="text-sm font-bold text-green-600 dark:text-green-400">$0.00</span>
                            {% else %}
                            <span class="text-sm font-semibold text-gray-800 dark:text-gray-200">${{ '%.2f' | format(p.retail) }}</span>
                            {% endif %}
                        </td>
                        <td class="px-5 py-3 text-center">
                            {% if p.free_tier %}
                            <span class="inline-flex items-center px-2 py-0.5 rounded-full text-[10px] font-bold uppercase tracking-wider bg-green-100 dark:bg-green-900/40 text-green-700 dark:text-green-400 border border-green-200 dark:border-green-700/50">
                                ‚úì Free
                            </span>
                            {% else %}
                            <span class="text-gray-300 dark:text-gray-600">‚Äî</span>
                            {% endif %}
                        </td>
                    </tr>
                    {% endfor %}
                    {% endfor %}
                </tbody>
            </table>
        </div>
    </div>

    <!-- Video Models -->
    <div class="mb-10">
        <div class="flex items-center gap-2 mb-4">
            <span class="inline-flex items-center px-2.5 py-1 rounded-full text-xs font-bold uppercase tracking-wider bg-purple-50 dark:bg-purple-900/20 text-purple-600 dark:text-purple-400 border border-purple-200 dark:border-purple-700/50">
                Video
            </span>
            <h2 class="text-lg font-semibold text-gray-800 dark:text-gray-100">Video Generation Models</h2>
            <span class="text-xs text-gray-400 dark:text-gray-500">({{ video_models | length }} models)</span>
        </div>

        <div class="bg-white dark:bg-[#1A1A1A] rounded-xl border border-[#26A0D8]/20 dark:border-[#26A0D8]/40 overflow-hidden">
            <table class="w-full">
                <thead>
                    <tr class="border-b border-[#26A0D8]/10 dark:border-[#26A0D8]/20">
                        <th class="text-left px-5 py-3 text-[11px] font-bold uppercase tracking-wider text-gray-400 dark:text-gray-500">Model</th>
                        <th class="text-left px-5 py-3 text-[11px] font-bold uppercase tracking-wider text-gray-400 dark:text-gray-500">Provider</th>
                        <th class="text-center px-5 py-3 text-[11px] font-bold uppercase tracking-wider text-gray-400 dark:text-gray-500">Type</th>
                        <th class="text-right px-5 py-3 text-[11px] font-bold uppercase tracking-wider text-gray-400 dark:text-gray-500">Per Generation</th>
                        <th class="text-center px-5 py-3 text-[11px] font-bold uppercase tracking-wider text-gray-400 dark:text-gray-500">Free Tier</th>
                    </tr>
                </thead>
                <tbody class="divide-y divide-gray-100 dark:divide-gray-800">
                    {% for m in video_models %}
                    {% for p in m.providers %}
                    <tr class="hover:bg-gray-50 dark:hover:bg-[#222] transition-colors {{ 'bg-green-50/50 dark:bg-green-900/10' if p.free_tier else '' }}">
                        <td class="px-5 py-3">
                            {% if loop.first %}
                            <div class="flex items-center gap-2">
                                <span class="text-lg">{{ m.icon }}</span>
                                <div>
                                    <p class="text-sm font-semibold text-gray-800 dark:text-gray-100">{{ m.display_name }}</p>
                                    <p class="text-[10px] text-gray-400 dark:text-gray-500 max-w-xs truncate">{{ m.description }}</p>
                                </div>
                            </div>
                            {% endif %}
                        </td>
                        <td class="px-5 py-3">
                            <div class="flex items-center gap-1.5">
                                <span class="text-sm text-gray-700 dark:text-gray-300">{{ p.label }}</span>
                                {% if p.sync %}
                                <span class="px-1.5 py-0.5 text-[9px] font-medium bg-gray-100 dark:bg-gray-700 text-gray-500 dark:text-gray-400 rounded">Instant</span>
                                {% endif %}
                            </div>
                        </td>
                        <td class="px-5 py-3 text-center">
                            <span class="inline-flex items-center px-1.5 py-0.5 rounded text-[9px] font-medium uppercase tracking-wider bg-purple-50 dark:bg-purple-900/20 text-purple-600 dark:text-purple-400">Video</span>
                        </td>
                        <td class="px-5 py-3 text-right">
                            {% if p.free_tier %}
                            <span class="text-sm font-bold text-green-600 dark:text-green-400">$0.00</span>
                            {% else %}
                            <span class="text-sm font-semibold text-gray-800 dark:text-gray-200">${{ '%.2f' | format(p.retail) }}</span>
                            {% endif %}
                        </td>
                        <td class="px-5 py-3 text-center">
                            {% if p.free_tier %}
                            <span class="inline-flex items-center px-2 py-0.5 rounded-full text-[10px] font-bold uppercase tracking-wider bg-green-100 dark:bg-green-900/40 text-green-700 dark:text-green-400 border border-green-200 dark:border-green-700/50">
                                ‚úì Free
                            </span>
                            {% else %}
                            <span class="text-gray-300 dark:text-gray-600">‚Äî</span>
                            {% endif %}
                        </td>
                    </tr>
                    {% endfor %}
                    {% endfor %}
                </tbody>
            </table>
        </div>
    </div>

    <!-- Summary Cards -->
    <div class="grid grid-cols-1 sm:grid-cols-3 gap-4 mb-8">
        <div class="bg-white dark:bg-[#1A1A1A] rounded-xl border border-[#26A0D8]/20 dark:border-[#26A0D8]/40 p-5">
            <div class="flex items-center gap-3">
                <div class="w-10 h-10 rounded-lg bg-green-50 dark:bg-green-900/20 flex items-center justify-center">
                    <svg class="w-5 h-5 text-green-500" fill="none" stroke="currentColor" viewBox="0 0 24 24">
                        <path stroke-linecap="round" stroke-linejoin="round" stroke-width="2" d="M5 13l4 4L19 7"/>
                    </svg>
                </div>
                <div>
                    <p class="text-xs font-medium text-gray-500 dark:text-gray-400">Free Models</p>
                    {% set free_count = (image_models + video_models) | selectattr('has_free_tier') | list | length %}
                    <p class="text-xl font-bold text-gray-900 dark:text-white">{{ free_count }}</p>
                </div>
            </div>
        </div>
        <div class="bg-white dark:bg-[#1A1A1A] rounded-xl border border-[#26A0D8]/20 dark:border-[#26A0D8]/40 p-5">
            <div class="flex items-center gap-3">
                <div class="w-10 h-10 rounded-lg bg-blue-50 dark:bg-blue-900/20 flex items-center justify-center">
                    <span class="text-lg">üñºÔ∏è</span>
                </div>
                <div>
                    <p class="text-xs font-medium text-gray-500 dark:text-gray-400">Image Models</p>
                    <p class="text-xl font-bold text-gray-900 dark:text-white">{{ image_models | length }}</p>
                </div>
            </div>
        </div>
        <div class="bg-white dark:bg-[#1A1A1A] rounded-xl border border-[#26A0D8]/20 dark:border-[#26A0D8]/40 p-5">
            <div class="flex items-center gap-3">
                <div class="w-10 h-10 rounded-lg bg-purple-50 dark:bg-purple-900/20 flex items-center justify-center">
                    <span class="text-lg">üé¨</span>
                </div>
                <div>
                    <p class="text-xs font-medium text-gray-500 dark:text-gray-400">Video Models</p>
                    <p class="text-xl font-bold text-gray-900 dark:text-white">{{ video_models | length }}</p>
                </div>
            </div>
        </div>
    </div>

    <!-- Info Note -->
    <div class="bg-[#F18523]/5 dark:bg-[#F18523]/10 border border-[#F18523]/20 dark:border-[#F18523]/30 rounded-xl p-4 flex items-start gap-3">
        <svg class="w-5 h-5 text-[#F18523] flex-shrink-0 mt-0.5" fill="none" stroke="currentColor" viewBox="0 0 24 24">
            <path stroke-linecap="round" stroke-linejoin="round" stroke-width="2" d="M13 16h-1v-4h-1m1-4h.01M21 12a9 9 0 11-18 0 9 9 0 0118 0z"/>
        </svg>
        <div>
            <p class="text-sm font-medium text-gray-800 dark:text-gray-200">About Free Tier Models</p>
            <p class="text-xs text-gray-500 dark:text-gray-400 mt-1">
                Models marked as "Free" use providers with generous free tiers (e.g. Google AI Studio).
                Free tier availability may change based on provider policies. Pricing shown is the retail price per generation.
            </p>
        </div>
    </div>
</div>
{% endblock %}
